<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://clinical-genomics.github.io/chanjo2/deployment/env_file/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Custom settings and the .env file - Chanjo2</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Custom settings and the .env file";
        var mkdocs_page_input_path = "deployment/env_file.md";
        var mkdocs_page_url = "/chanjo2/deployment/env_file/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Chanjo2
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Index</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Deployment</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../docker-deployment/">Deployment using Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation on a virtual environment</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Custom settings and the .env file</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#database-settings">Database settings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#customising-the-coverage-levels-used-to-create-coverage-reports-and-genes-overview-reports">Customising the coverage levels used to create coverage reports and genes overview reports</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#endpoint-protection-using-oidc-authentication">Endpoint Protection Using OIDC Authentication</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/loading-intervals/">Loading and displaying genes, transcripts and exons</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/sample-coverage/">Coverage and coverage completeness queries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/coverage-reports/">Coverage and genes overview reports</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../usage/authorised_requests/">Authorised requests</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Chanjo2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Deployment</li>
      <li class="breadcrumb-item active">Custom settings and the .env file</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/Clinical-Genomics/chanjo2/edit/master/docs/deployment/env_file.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="custom-settings-and-the-env-file">Custom settings and the .env file</h1>
<p>The demo server is connecting to a SQLite database whose temporary tables are destroyed and re-created every time the server is started.
In order to connect to a permanent MYSQL database instance, you'd need to customise the settings present on the <a href="https://github.com/Clinical-Genomics/chanjo2/blob/main/.env"><code>.env</code></a> file.</p>
<h2 id="database-settings">Database settings</h2>
<pre><code>MYSQL_USER=dbUser
MYSQL_PASSWORD=dbPassword
MYSQL_DATABASE_NAME=chanjo2_test
MYSQL_HOST_NAME=localhost
MYSQL_PORT=3306
</code></pre>
<h2 id="customising-the-coverage-levels-used-to-create-coverage-reports-and-genes-overview-reports">Customising the coverage levels used to create coverage reports and genes overview reports</h2>
<p>When generating coverage and genes overview reports, the metrics showcased in these documents are calculated across various coverage levels, such as 10x, 20x, and 50x.
These specific coverage levels can be directly specified in queries to the <code>/report</code> and <code>/overview</code> endpoints using the <code>completeness_thresholds parameter</code>, which accepts a list of integers. 
For detailed instructions, please refer to the <a href="../../usage/coverage-reports/">coverage-reports documentation</a>.
Alternatively, you can define these coverage levels in the .env file by adding the following line:</p>
<pre><code>REPORT_COVERAGE_LEVELS=[100,150,,..]
</code></pre>
<p>If the <code>REPORT_COVERAGE_LEVELS</code> parameter is not present in the .env file and a request does not include a completeness_thresholds value, the report metrics will <strong>default to the following coverage level values: [10, 15, 20, 50, 100]</strong>.</p>
<p>It's important to note that if coverage level values are provided through multiple methods as described above, the application will prioritize them in the following order:</p>
<ol>
<li>Values specified in the user's request</li>
<li>Values included in the .env file</li>
<li>Default coverage level values</li>
</ol>
<p>Furthermore, it's worth considering that the more coverage levels provided, the longer it will take for the report pages to load.</p>
<h2 id="endpoint-protection-using-oidc-authentication">Endpoint Protection Using OIDC Authentication</h2>
<p>Chanjo2 supports authenticated requests via OIDC. This functionality has been tested with Keycloak but should also work with Google authentication.
To enforce authentication for the /report, /overview, /gene_overview, /mane_overview and all /coverage endpoints, uncomment and customize the following parameter.</p>
<pre><code>## Optional OIDC login settings
# JWKS_URL=https://example.com/realms/&lt;realm-name&gt;/protocol/openid-connect/certs
# AUDIENCE=account
</code></pre>
<p>More information about authenticated requests can be found in the following document: <a href="../../usage/authorised_requests/">Authorised Requests</a>.</p>
<p>The last line present on this file (<code>DEMO=Y</code>) should be removed or commented out when the app is not running in development mode.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installation/" class="btn btn-neutral float-left" title="Installation on a virtual environment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../usage/loading-intervals/" class="btn btn-neutral float-right" title="Loading and displaying genes, transcripts and exons">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/Clinical-Genomics/chanjo2/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../installation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../usage/loading-intervals/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
